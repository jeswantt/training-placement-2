class Solution(object):
    def longestValidParentheses(self, s):
        """
        :type s: str
        :rtype: int
        """
        table = {}
        table[0] = -1
        current = 0
        output = 0

        for i in range(len(s)):
            if s[i] == '(':
                current += 1
                table[current] = i
            else:
                current -= 1
                if current not in table:
                    table[current] = i
            
            output = max(output, i - table[current])
        
        return output
